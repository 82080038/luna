<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luna - Mobile Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
</head>
<body>
    <div class="mobile-dashboard">
        <!-- Header -->
        <div class="mobile-header">
            <div class="d-flex justify-content-between align-items-center">
                <div class="user-info">
                    <div class="avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <h6 class="mb-0">Admin Luna</h6>
                        <small>Super Admin</small>
                    </div>
                </div>
                <button class="btn btn-outline-light btn-sm" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>

        <!-- Stats Section -->
        <div class="mobile-stats">
            <div class="row g-2">
                <div class="col-6">
                    <div class="mobile-stat-card">
                        <div class="mobile-stat-number">Rp 2.5M</div>
                        <div class="mobile-stat-label">Total Transaksi</div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="mobile-stat-card bos-stats">
                        <div class="mobile-stat-number">
                            <span id="bos-aktif">4</span>/<span id="bos-total">4</span>
                        </div>
                        <div class="mobile-stat-label">BOS (Aktif/Total)</div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="mobile-stat-card">
                        <div class="mobile-stat-number">156</div>
                        <div class="mobile-stat-label">Transaksi Hari Ini</div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="mobile-stat-card">
                        <div class="mobile-stat-number">24</div>
                        <div class="mobile-stat-label">User Aktif</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Section -->
        <div class="mobile-content">
            <!-- Quick Actions -->
            <h6 class="mb-3">Aksi Cepat</h6>
            <div class="row g-2 mb-4">
                <div class="col-6">
                    <button class="mobile-action-btn" onclick="openTebakan()">
                        <i class="fas fa-dice"></i>
                        <span>Input Tebakan</span>
                    </button>
                </div>
                <div class="col-6">
                    <button class="mobile-action-btn" onclick="openDeposit()">
                        <i class="fas fa-wallet"></i>
                        <span>Deposit</span>
                    </button>
                </div>
                <div class="col-6">
                    <button class="mobile-action-btn" onclick="openWithdraw()">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Withdraw</span>
                    </button>
                </div>
                <div class="col-6">
                    <button class="mobile-action-btn" onclick="openReport()">
                        <i class="fas fa-chart-bar"></i>
                        <span>Laporan</span>
                    </button>
                </div>
            </div>

            <!-- Recent Transactions -->
            <h6 class="mb-3">Transaksi Terbaru</h6>
            <div class="recent-transactions">
                <div class="mobile-transaction-item">
                    <div class="mobile-transaction-info">
                        <h6 class="mb-1">TXN-001</h6>
                        <p class="mb-0">4D - 1234 (Rp 10.000)</p>
                    </div>
                    <div class="mobile-transaction-amount">+Rp 30.000</div>
                </div>
                <div class="mobile-transaction-item">
                    <div class="mobile-transaction-info">
                        <h6 class="mb-1">TXN-002</h6>
                        <p class="mb-0">2D - 56 (Rp 5.000)</p>
                    </div>
                    <div class="mobile-transaction-amount">+Rp 350.000</div>
                </div>
                <div class="mobile-transaction-item">
                    <div class="mobile-transaction-info">
                        <h6 class="mb-1">TXN-003</h6>
                        <p class="mb-0">Deposit (Rp 100.000)</p>
                    </div>
                    <div class="mobile-transaction-amount text-success">+Rp 100.000</div>
                </div>
                <div class="mobile-transaction-item">
                    <div class="mobile-transaction-info">
                        <h6 class="mb-1">TXN-004</h6>
                        <p class="mb-0">Withdraw (Rp 50.000)</p>
                    </div>
                    <div class="mobile-transaction-amount text-danger">-Rp 50.000</div>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <button class="mobile-floating-btn" onclick="openQuickAction()">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Bottom Navigation -->
        <div class="mobile-bottom-nav">
            <a href="#" class="mobile-nav-item active">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a>
            <a href="#" class="mobile-nav-item">
                <i class="fas fa-dice"></i>
                <span>Tebakan</span>
            </a>
            <a href="#" class="mobile-nav-item">
                <i class="fas fa-wallet"></i>
                <span>Wallet</span>
            </a>
            <a href="#" class="mobile-nav-item">
                <i class="fas fa-chart-bar"></i>
                <span>Report</span>
            </a>
            <a href="#" class="mobile-nav-item">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </a>
        </div>
    </div>

    <!-- Bootstrap Modal for Quick Actions -->
    <div class="modal fade" id="quickActionModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Aksi Cepat</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-2">
                        <div class="col-6">
                            <button class="btn btn-primary w-100" onclick="openTebakan()">
                                <i class="fas fa-dice mb-2"></i><br>
                                Input Tebakan
                            </button>
                        </div>
                        <div class="col-6">
                            <button class="btn btn-success w-100" onclick="openDeposit()">
                                <i class="fas fa-wallet mb-2"></i><br>
                                Deposit
                            </button>
                        </div>
                        <div class="col-6">
                            <button class="btn btn-warning w-100" onclick="openWithdraw()">
                                <i class="fas fa-money-bill-wave mb-2"></i><br>
                                Withdraw
                            </button>
                        </div>
                        <div class="col-6">
                            <button class="btn btn-info w-100" onclick="openReport()">
                                <i class="fas fa-chart-bar mb-2"></i><br>
                                Laporan
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Check authentication and role access
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is logged in and has appropriate role
            if (!LunaAuth.checkRoleAccess(['Admin Bos', 'Transporter', 'Penjual', 'Pembeli'])) {
                return;
            }
            
            // Initialize mobile dashboard
            initMobileDashboard();
        });
        
        // Initialize mobile dashboard
        function initMobileDashboard() {
            const currentUser = LunaUtils.getCurrentUser();
            if (currentUser) {
                // Update user info
                document.getElementById('user-name').textContent = currentUser.name || currentUser.username;
                document.getElementById('user-role').textContent = currentUser.role;
            }
            
            // Load mobile dashboard data
            LunaDashboard.loadDashboard();
        }
    </script>
</body>
</html>